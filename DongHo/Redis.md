# Redis

## Redis(Remote Dictionary Server) 정의
```
Key, Value 구조의 비정형 데이터를 저장하고 관리하기 위한 오픈 소스 기반의 비관계형 데이터 베이스 관리 시스템 (DBMS)입니다.

데이터베이스, 캐시, 메세지 브로커로 사용되며 인메모리 데이터 구조를 가진 저장소입니다.
```

[Redis란?](https://wildeveloperetrain.tistory.com/21)

<br/>

## Redis의 장점, 유의점

#### 장점
```

* 영속성을 지원하는 인메모리 데이터 저장소

* 읽기 성능 증대를 위한 서버 측 복제를 지원

* 쓰기 성능 증대를 위한 클라이언트 측 샤딩(Sharding) 지원

* 다양한 서비스에서 사용되며 검증된 기술

* 문자열, 리스트, 해시, 셋, 정렬된 셋과 같은 다양한 데이터형을 지원. 메모리 저장소임에도 불구하고 많은 데이터형을 지원하므로 다양한 기능을 구현
```

[Redis 장점](https://devlog-wjdrbs96.tistory.com/374)

<br/>

#### 유의점
'''
* 서버에 장애가 발생했을 경우 그에 대한 운영 플랜이 꼭 필요합니다.
  - 인메모리 데이터 저장소의 특성상, 서버에 장애가 발생했을 경우 데이터 유실이 발생할 수 있기 때문입니다.

* 메모리 관리가 중요합니다.

* 싱글 스레드의 특성상, 한 번에 하나의 명령만 처리할 수 있습니다. 처리하는데 시간이 오래 걸리는 요청, 명령은 피해야 합니다.
'''

<br/>

## Redis 활용 사례

* 사례 1 - 좋아요 처리하기

* 사례 2 - 게임 서비스에서 일일 순 방문자수(Unique Visitor) 구하기

* 사례 3 - 출석 이벤트 구현하기

* 사례 4 - 최근 검색 목록 표시하기

[Redis의 다양한 활용 사례](https://happyer16.tistory.com/entry/%EB%A0%88%EB%94%94%EC%8A%A4Redis%EC%9D%98-%EB%8B%A4%EC%96%91%ED%95%9C-%ED%99%9C%EC%9A%A9-%EC%82%AC%EB%A1%80)

<br/>

## JWT Refresh 토큰 저장에 Redis 사용 이유

* Refresh 토큰을 서버에서 만료시킬 수 있다.

```
의문점

- In-Memory 저장 방식인 Redis를 사용할 경우, 서버 증설시 Stateless 보장 가능?

- OAuth 구현 시, 리소스 서버에서 받아오는 사용자 정보 이외의 유저 정보 저장하려할 때
```

## 다중 서버에서 Redis 를 이용한 세션 관리

- 3가지 세션 관리 방법 
```
1. sticky session

2. 세션 클러스터링

3. Redis 세션 클러스터링
```

1번의 경우 세션이 was 안에 있는 프로젝트에서 생성 되기 때문에, 다중 서버 환경에서는 서버간 세션 유지가 되지 않습니다.

2번의 경우 여러 대의 서버에 모두 같은 세션 정보를 저장시킴으로써 세션을 유지시키는 방법입니다.
이 방법은 서버마다 모든 사용자 세션의 정보를 가지고 있기 때문에 메모리 부하가 심합니다.

3번의 경우 세션을 관리할 서버를 따로 두어 사용하는 방식입니다.
![img (1)](https://user-images.githubusercontent.com/92728780/194062895-0000837c-fe13-47fa-b688-3ad2cf50d281.png)

위와 같은 방법으로 세션이 별도 외부 서버에서 관리되므로, 다중 서버 환경에서 세션 유지가 가능하게 됩니다.

[다중서버에서 세션 관리](https://developer111.tistory.com/69)

```
의문점

- 토큰 관리시 하나의 서버에서 Redis를 사용하였는지
```
